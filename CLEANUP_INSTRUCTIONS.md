# üßπ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ—á–∏—Å—Ç–∫–µ —Å—Ç–∞—Ä—ã—Ö –æ—à–∏–±–æ–∫ GitHub Actions

## –ë—ã—Å—Ç—Ä–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### 1. **–†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: https://github.com/kureinmaxim/vpn-server-manager/actions
2. –î–ª—è –∫–∞–∂–¥–æ–π –æ—à–∏–±–∫–∏:
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ "..." (—Ç—Ä–∏ —Ç–æ—á–∫–∏) —Å–ø—Ä–∞–≤–∞
   - –í—ã–±–µ—Ä–∏—Ç–µ "Delete workflow run"
3. –ò–ª–∏ –º–∞—Å—Å–æ–≤–æ:
   - –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫–∏ —Ä—è–¥–æ–º —Å –æ—à–∏–±–∫–∞–º–∏
   - –ù–∞–∂–º–∏—Ç–µ "Delete selected" –≤–Ω–∏–∑—É

### 2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –í—ã–±–µ—Ä–∏—Ç–µ **Actions ‚Üí General**
3. –í —Ä–∞–∑–¥–µ–ª–µ **"Artifact and log retention"**:
   - **Days to keep artifacts**: `1`
   - **Days to keep logs**: `1`
4. –ù–∞–∂–º–∏—Ç–µ **"Save"**

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
1. **–°–æ–∑–¥–∞–π—Ç–µ GitHub Token**:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π token —Å –ø—Ä–∞–≤–∞–º–∏ `repo`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ token

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
```bash
export GITHUB_TOKEN=your_token_here
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤

#### –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –æ—à–∏–±–æ–∫:
```bash
python clean_workflows.py
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏:
```bash
python setup_workflow_cleanup.py
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã

### –ß–µ—Ä–µ–∑ GitHub CLI:
```bash
# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
gh auth login

# –ü—Ä–æ—Å–º–æ—Ç—Ä workflow runs
gh run list

# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ run
gh run delete <run_id>

# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–µ—É–¥–∞—á–Ω—ã—Ö runs
gh run list --status failure --json databaseId | jq -r '.[].databaseId' | xargs -I {} gh run delete {}
```

### –ß–µ—Ä–µ–∑ API –Ω–∞–ø—Ä—è–º—É—é:
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ runs
curl -H "Authorization: token $GITHUB_TOKEN" \
     https://api.github.com/repos/kureinmaxim/vpn-server-manager/actions/runs

# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π run
curl -X DELETE -H "Authorization: token $GITHUB_TOKEN" \
     https://api.github.com/repos/kureinmaxim/vpn-server-manager/actions/runs/{run_id}
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

### 1. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ runs**
–í —Ñ–∞–π–ª–µ `.github/workflows/ci.yml` –¥–æ–±–∞–≤—å—Ç–µ:
```yaml
on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]
  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö runs
  workflow_dispatch:

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true
```

### 2. **–£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ CI**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ Python
- –ò–∑–±–µ–≥–∞–π—Ç–µ Windows –≤ CI (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π)
- –î–æ–±–∞–≤—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### 3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö builds
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ CI/CD
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ badges –≤ README –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö runs
gh run list --limit 10

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ run
gh run view <run_id>

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ run
gh run rerun <run_id>
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –∫–æ–¥
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: GitHub API –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–∞–∂–Ω—ã–µ –ª–æ–≥–∏ –ª—É—á—à–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—É—é –æ—á–∏—Å—Ç–∫—É —á–µ—Ä–µ–∑ GitHub Actions 