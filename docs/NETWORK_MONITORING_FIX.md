# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ—Ç–∞ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ

## –ü—Ä–æ–±–ª–µ–º–∞

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∫–∞–∑—ã–≤–∞–ª **–∑–∞–Ω–∏–∂–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ VPN-—Å–µ—Ä–≤–µ—Ä—É. 

### –ü—Ä–∏—á–∏–Ω–∞

–°—Ç–∞—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —É—á–∏—Ç—ã–≤–∞–ª–∞ —Ç—Ä–∞—Ñ–∏–∫ **—Ç–æ–ª—å–∫–æ —Å –æ–¥–Ω–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞** (–æ–±—ã—á–Ω–æ `eth0` –∏–ª–∏ `ens3`), –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–ª—Å—è –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É:
```bash
ip route | grep default | awk '{print $5}' | head -1
```

–û–¥–Ω–∞–∫–æ **VPN-—Ç—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã**:
- **OpenVPN**: `tun0`, `tap0`
- **WireGuard**: `wg0`
- **IPSec**: `ipsec0`
- **PPTP**: `ppp0`

–≠—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã **–ù–ï —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å** –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –∑–∞–Ω–∏–∂–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö.

### –ü—Ä–∏–º–µ—Ä

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–º–æ—Ç—Ä–∏—Ç –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ VPN:
- **–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è**: –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ —Ç–æ–ª—å–∫–æ —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ `eth0` ‚Üí ~0.05 MB/s (–∑–∞–Ω–∏–∂–µ–Ω–æ)
- **–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è**: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—É–º–º–∞—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ `eth0 + tun0` ‚Üí —Ä–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

## –†–µ—à–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app/services/ssh_service.py`

**–ú–µ—Ç–æ–¥ `get_network_stats()`** –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω:

#### ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**
   ```python
   # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (–∫—Ä–æ–º–µ lo - loopback)
   # –í–∫–ª—é—á–∞–µ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ (eth0, ens3) –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ VPN-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (tun0, wg0, tap0)
   ls /sys/class/net/ | grep -v '^lo$' | grep -E '^(eth|ens|eno|enp|wlan|wlp|tun|tap|wg|ppp|ipsec)'
   ```

2. **–°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ —Å–æ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤**
   ```python
   for iface in interfaces:
       total_rx1 += int(rx_bytes)
       total_tx1 += int(tx_bytes)
   ```

3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—É—Ç–æ—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `vnstat --json` –¥–ª—è —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ –≤—Å–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —É–¥–æ–±–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã (MiB/GiB)

4. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   ```python
   logger.info(f"Monitoring network traffic on interfaces: {', '.join(interfaces)}")
   ```

5. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ API**
   ```json
   {
     "interface": "all (3 interfaces)",
     "interfaces": ["eth0", "tun0", "wg0"],
     "current": { ... },
     "daily": { ... }
   }
   ```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `templates/monitoring.html`

#### ‚úÖ HTML:

–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–º—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:
```html
<div class="mb-2" style="font-size: 0.85rem; color: #6c757d;">
    <span id="monitored-interfaces">üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤</span>
</div>
```

#### ‚úÖ JavaScript:

–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `updateNetworkStats()` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:
```javascript
// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–º—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
if (stats.interfaces && stats.interfaces.length > 0) {
    const interfacesList = stats.interfaces.join(', ');
    document.getElementById('monitored-interfaces').innerHTML = 
        `üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: <strong>${interfacesList}</strong> (${stats.interfaces.length} –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤)`;
}
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

–¢–µ–ø–µ—Ä—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—á–∏—Ç—ã–≤–∞–µ—Ç:

### –§–∏–∑–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
- `eth0`, `eth1`, ... - Ethernet
- `ens3`, `ens4`, ... - Ethernet (–Ω–æ–≤–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
- `eno1`, `eno2`, ... - Ethernet (–Ω–æ–≤–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
- `enp0s3`, `enp0s8`, ... - Ethernet (–Ω–æ–≤–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
- `wlan0`, `wlan1`, ... - Wi-Fi
- `wlp3s0`, ... - Wi-Fi (–Ω–æ–≤–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)

### VPN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
- `tun0`, `tun1`, ... - OpenVPN (TUN mode)
- `tap0`, `tap1`, ... - OpenVPN (TAP mode)
- `wg0`, `wg1`, ... - WireGuard
- `ppp0`, `ppp1`, ... - PPTP, L2TP
- `ipsec0`, `ipsec1`, ... - IPSec

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
‚Üì –ó–∞–≥—Ä—É–∑–∫–∞: 0.05 MB/s –ü–∏–∫: 0.10 MB/s
‚Üë –û—Ç–¥–∞—á–∞: 0.04 MB/s –ü–∏–∫: 0.10 MB/s
üìà –ó–∞ 24 —á–∞—Å–∞: ‚Üì 65.38 MiB ‚Üë 51.80 MiB
```
*(–£—á–∏—Ç—ã–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ eth0)*

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: eth0, tun0, wg0 (3 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤)
‚Üì –ó–∞–≥—Ä—É–∑–∫–∞: 15.42 MB/s –ü–∏–∫: 25.60 MB/s
‚Üë –û—Ç–¥–∞—á–∞: 8.75 MB/s –ü–∏–∫: 12.30 MB/s
üìà –ó–∞ 24 —á–∞—Å–∞: ‚Üì 3.45 GiB ‚Üë 2.12 GiB
```
*(–£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –≤–∫–ª—é—á–∞—è VPN)*

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. ‚úÖ **–¢–æ—á–Ω—ã–π —É—á–µ—Ç VPN-—Ç—Ä–∞—Ñ–∏–∫–∞** - –≤–∏–¥–∏—Ç–µ —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ** - –Ω–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
3. ‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤–∏–¥–∏—Ç–µ, –∫–∞–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –º–æ–Ω–∏—Ç–æ—Ä—è—Ç—Å—è
4. ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ VPN-—Ä–µ—à–µ–Ω–∏—è–º–∏
5. ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –µ—Å–ª–∏ VPN –Ω–µ—Ç, —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ eth0

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å VPN:

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH:
   ```bash
   ssh root@your-server
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
   ```bash
   ls /sys/class/net/
   # –í—ã–≤–æ–¥: eth0 lo tun0 wg0
   ```

3. –û—Ç–∫—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –°–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å: `eth0, tun0, wg0`
   - –ó–Ω–∞—á–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã—à–µ, —á–µ–º —Ä–∞–Ω—å—à–µ
   - –ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º VPN-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —Ç—Ä–∞—Ñ–∏–∫ –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ Python 3.7+
- ‚úÖ Linux (–ª—é–±–æ–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤)
- ‚úÖ OpenVPN
- ‚úÖ WireGuard
- ‚úÖ IPSec
- ‚úÖ PPTP/L2TP
- ‚úÖ –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ VPN —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏

## –î–∞—Ç–∞ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

–û–∫—Ç—è–±—Ä—å 2025

## –ê–≤—Ç–æ—Ä

VPN Server Manager Development Team

